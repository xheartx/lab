<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>倒计时</title>
<!--[if lte IE 6]>
<script src="js/DD_belatedPNG_0.0.8a.js" type="text/javascript"></script>
    <script type="text/javascript">
        DD_belatedPNG.fix('a');
    </script>
<![endif]-->
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<script type="text/javascript">
window.onload=function ()
{
	var oFill = document.getElementById('fill_in');
	var oInputYear = oFill.getElementsByTagName('input')[0];
	var oInputMouth = oFill.getElementsByTagName('input')[1];
	var oInputDay = oFill.getElementsByTagName('input')[2];
	var oBtn = document.getElementById('go');
	var oTxtDay = document.getElementById('day');
	var oTxtHour = document.getElementById('hour');
	var oTxtMin = document.getElementById('min');
	var oTxtSec = document.getElementById('sec');
	var oTxtEnd = document.getElementById('target').getElementsByTagName('strong')[0];
	var timer = null;
	
	function setDigit(num,n){
		var str = ''+num;
		while(str.length<n){
			str = '0' + str
		}
		return str;
	}
	
	oBtn.onclick = function (){
		
		oTxtEnd.innerHTML = oInputYear.value + '年' + oInputMouth.value + '月' + oInputDay.value + '日';
		timer = setInterval(updateTime,1000)
		updateTime();
	}
	
	function updateTime (){
		var oDateEnd = new Date();
		var oDateNow = new Date();
		
		oDateEnd.setFullYear(parseInt(oInputYear.value));
		oDateEnd.setMonth(parseInt(oInputMouth.value)-1);
		oDateEnd.setDate(parseInt(oInputDay.value));
		oDateEnd.setHours(0);
		oDateEnd.setMinutes(0);
		oDateEnd.setSeconds(0);
		
		var iRemain = (oDateEnd.getTime() - oDateNow.getTime())/1000;
		
		if(iRemain<=0){
			clearInterval(timer);
			iRemain=0;
			alert('已过时间');
		}
		
		var iDay = parseInt(iRemain/86400);
		iRemain %= 86400;
		
		var iHour = parseInt(iRemain/3600);
		iRemain %= 3600;
		
		var iMin = parseInt(iRemain/60);
		iRemain %= 60;
		
		var iSec = iRemain;
		
		oTxtDay.innerHTML = setDigit(iDay,3);
		oTxtHour.innerHTML = setDigit(iHour,2);
		oTxtMin.innerHTML = setDigit(iMin,2);
		oTxtSec.innerHTML = setDigit(iSec,2);
		
		return;
	}
	
};
</script>
<body>

<div id="miaov">
    <div id="fill_in">
        <span class="title">请输入：</span>
        <input type="text" class="long_text" value="2016" />
        <span class="space1">年</span>
        <input type="text" class="text" value="12" />
        <span class="space2">月</span>
        <input type="text" class="text" value="22" />
        <span class="space3">日</span>
    </div>

    <a href="javascript:;" id="go" class="go"></a>
    <!--<a href="javascript:;" id="go2" class="active"></a>-->

    <p id="target">
        现在距离 -
        <strong>2016年12月22日</strong>
        - 还剩：
    </p>

    <div id="date">
        <p id="day">000</p>
        <p id="hour">00</p>
        <p id="min">00</p>
        <p id="sec">00</p>
    </div>

    <h1 title="X.HEART-xheartx.com"><a href="http://xheartx.com"></a></h1>
</div>

</body>
</html>
